<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desafio Log√≠stico: Otimizando o Layout do Armarmaz√©m</title>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f7f6;
            color: #333;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            color: #004a99; /* Cor principal da Log√≠stica */
            border-bottom: 3px solid #ffaa00;
            padding-bottom: 10px;
        }

        .professor {
            font-style: italic;
            color: #555;
        }

        main {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            width: 90%;
            max-width: 1000px;
        }

        /* √Årea de Informa√ß√µes (Nome e Cron√¥metro) */
        .info-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .timer-box {
            font-size: 1.5em;
            font-weight: bold;
            color: #cc0000; /* Cor de alerta para o tempo */
            transition: color 0.5s;
        }
        
        /* Efeito de alerta no cron√¥metro */
        @keyframes flash {
            0% { background-color: transparent; }
            50% { background-color: rgba(255, 0, 0, 0.2); }
            100% { background-color: transparent; }
        }

        .timer-box.flash-red {
            color: #cc0000;
            animation: flash 1s infinite;
        }

        .name-box input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 200px;
        }

        /* √Årea do Jogo */
        .game-area {
            border: 2px dashed #004a99;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        #level-title {
            color: #ffaa00;
        }

        .instructions strong {
            color: #004a99;
        }

        #activity-content {
            min-height: 200px;
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #eee;
            background-color: #f9f9f9;
        }

        /* Bot√µes de Controle */
        .controls {
            text-align: right;
            margin-top: 20px;
            display: flex;
            justify-content: flex-end; /* Alinha bot√µes √† direita */
            gap: 10px; /* Espa√ßamento entre os bot√µes */
        }

        .controls button {
            padding: 10px 20px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }

        #next-level-btn {
            background-color: #004a99;
            color: white;
            order: 3; /* Coloca este por √∫ltimo */
        }

        #next-level-btn:hover:not([disabled]) {
            background-color: #003366;
        }
        
        #reset-btn {
            background-color: #5cb85c; /* Cor verde para rein√≠cio */
            color: white;
            order: 1; /* Coloca este em primeiro */
        }

        #reset-btn:hover {
            background-color: #449d44;
        }

        #finish-btn {
            background-color: #cc0000;
            color: white;
            order: 2; /* Coloca este no meio */
        }

        #finish-btn:hover {
            background-color: #990000;
        }

        button[disabled] {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Ranking */
        .ranking-area {
            padding: 20px;
            background-color: #e6e9f0;
            border-radius: 8px;
            width: 100%;
            margin-top: 20px;
        }

        .ranking-area h2 {
            color: #004a99;
            text-align: center;
        }

        #ranking-list {
            list-style: none;
            padding: 0;
        }

        #ranking-list li {
            background-color: #fff;
            margin-bottom: 5px;
            padding: 10px;
            border-left: 5px solid #ffaa00;
            display: flex;
            justify-content: space-between;
            font-weight: bold;
        }

        .medal-icon {
            font-size: 1.2em;
            margin-right: 5px;
        }

        /* Estilo para quest√µes de M√∫ltipla Escolha */
        .question-item label {
            display: block;
            margin: 8px 0;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            color: #333;
        }

        .question-item label:hover {
            background-color: #f0f0f0;
        }
    </style>
    </head>
<body>

    <header>
        <h1>DESAFIO LOG√çSTICO: OTIMIZANDO O LAYOUT DO ARMAZ√âM</h1>
        <p class="professor">Professor Luiz Eduardo Peixoto</p>
    </header>

    <main>
        <section class="info-area">
            <div class="timer-box">
                Tempo Restante: <span id="timer">10:00</span>
            </div>
            <div class="name-box">
                <label for="studentName">Nome do Aluno(a):</label>
                <input type="text" id="studentName" placeholder="Digite seu nome para o ranking" maxlength="50">
            </div>
        </section>

        <section class="game-area">
            <h2 id="level-title">N√≠vel 1: Conceitos Fundamentais</h2>
            <div class="instructions">
                <p><strong>Pontos:</strong> Acertos no N√≠vel 1 valem 10 pts, N√≠vel 2 valem 20 pts e N√≠vel 3 valem 30 pts. <span id="current-score">Sua Pontua√ß√£o: 0</span></p>
            </div>
            
            <div id="activity-content">
                </div>

            <div class="controls">
                <button id="reset-btn" onclick="resetActivity()">REINICIAR ATIVIDADE</button>
                
                <button id="finish-btn" onclick="finishTask()">FINALIZAR TAREFA</button>
                <button id="next-level-btn" onclick="nextLevel()" disabled>Avan√ßar N√≠vel</button>
            </div>
        </section>

        <section id="ranking-area" class="ranking-area">
            <h2>Ranking Local <span class="medal-icon">üèÖ</span></h2>
            <ol id="ranking-list">
                </ol>
        </section>
    </main>

    <script>
        // Vari√°veis Globais
        let timerInterval;
        let timeLeft = 600; // 10 minutos * 60 segundos
        let currentLevel = 1;
        let currentScore = 0;
        const MAX_LEVELS = 3;

        // --- Configura√ß√£o das Quest√µes (3 N√≠veis) ---
        const questions = {
            1: [ // N√≠vel 1: Conceitos Fundamentais (10 pontos por acerto)
                {
                    type: 'multiple-choice',
                    question: "Qual √© o principal objetivo do layout de um armaz√©m?",
                    options: {
                        a: "Aumentar o estoque e a dist√¢ncia de movimenta√ß√£o.",
                        b: "Redu√ß√£o do custo e maior produtividade atrav√©s da melhor utiliza√ß√£o do espa√ßo dispon√≠vel e fluxo racional.",
                        c: "Priorizar a estocagem de alto volume, independentemente do acesso."
                    },
                    correctAnswer: 'b',
                    points: 10,
                    reference: "Refer√™ncia: Se√ß√£o 'Os objetivos do layout' (Melhor aproveitamento de espa√ßo e fluxo racional)."
                },
                {
                    type: 'multiple-choice',
                    question: "Quais das seguintes N√ÉO √© considerada uma √°rea essencial em um layout de armaz√©m bem definido?",
                    options: {
                        a: "√Årea de Armazenagem e √Årea de Recebimento.",
                        b: "√Årea de Expedi√ß√£o e √Årea de Prepara√ß√£o de Pedidos (Picking).",
                        c: "√Årea de Lazer e √Årea de Reuni√µes de Vendas."
                    },
                    correctAnswer: 'c',
                    points: 10,
                    reference: "Refer√™ncia: √Åreas A, B, C, D, E do layout (Carga, Recebimento, Armazenagem, Picking, Expedi√ß√£o)."
                }
            ],
            2: [ // N√≠vel 2: Aplica√ß√£o de Princ√≠pios (20 pontos por acerto)
                {
                    type: 'multiple-choice',
                    question: "De acordo com o princ√≠pio do 'Giro de Material' (Curva ABC), qual √© a localiza√ß√£o ideal para produtos de *Alto Giro* (Curva A) em rela√ß√£o aos pontos de entrada e sa√≠da do armaz√©m?",
                    options: {
                        a: "Em posi√ß√µes menos favor√°veis, afastados e em alturas elevadas.",
                        b: "Pr√≥ximos aos pontos de entrada e sa√≠da (Expedi√ß√£o/Picking) e em altura acess√≠vel.",
                        c: "Distribu√≠dos aleatoriamente para diversificar o uso do espa√ßo."
                    },
                    correctAnswer: 'b',
                    points: 20,
                    reference: "Refer√™ncia: Princ√≠pio da M√≠nima Dist√¢ncia (Produtos A devem percorrer o menor caminho)."
                },
                {
                    type: 'multiple-choice',
                    question: "O Layout em 'U' √© um modelo comum na log√≠stica. Qual √© sua principal caracter√≠stica de fluxo?",
                    options: {
                        a: "Cria um fluxo em linha reta, minimizando os corredores.",
                        b: "Cria um fluxo cont√≠nuo onde a entrada (Recebimento) e a sa√≠da (Expedi√ß√£o) ocorrem em extremidades opostas do armaz√©m.",
                        c: "Cria um fluxo cont√≠nuo, onde produtos entram e saem pelo mesmo lado do armaz√©m (ponto de entrada/sa√≠da pr√≥ximo)."
                    },
                    correctAnswer: 'c',
                    points: 20,
                    reference: "Refer√™ncia: Layout em U (Otimiza o uso de uma √∫nica fachada para docas)."
                }
            ],
            3: [ // N√≠vel 3: Solu√ß√£o de Problemas (30 pontos por acerto)
                {
                    type: 'multiple-choice',
                    question: "Em uma simula√ß√£o, voc√™ identifica que as empilhadeiras na √°rea de Picking constantemente cruzam o caminho das mercadorias que est√£o sendo descarregadas no Recebimento, causando congestionamento. Qual princ√≠pio fundamental do Layout est√° sendo violado e qual a√ß√£o deve ser tomada?",
                    options: {
                        a: "Princ√≠pio do Uso de Espa√ßo C√∫bico; deve-se armazenar mais alto.",
                        b: "Princ√≠pio do Fluxo Racional (M√≠nima Dist√¢ncia); √© preciso arranjar as √°reas para evitar cruzamentos e congestionamentos de materiais.",
                        c: "Princ√≠pio da Flexibilidade; a solu√ß√£o √© mudar o tipo de palete."
                    },
                    correctAnswer: 'b',
                    points: 30,
                    reference: "Refer√™ncia: Princ√≠pio do Fluxo (Evitar zonas e pontos de congestionamento)."
                },
                {
                    type: 'multiple-choice',
                    question: "Uma empresa lida com cargas pesadas, volumosas e que exigem montagem do cliente (Projeto sob Encomenda). Qual tipo de Arranjo F√≠sico (Layout) seria o mais adequado para esta opera√ß√£o?",
                    options: {
                        a: "Layout por Produto (Linha Reta).",
                        b: "Layout Estacion√°rio (ou de Posi√ß√£o Fixa).",
                        c: "Layout por Processo (Organiza√ß√£o por especialidades)."
                    },
                    correctAnswer: 'b',
                    points: 30,
                    reference: "Refer√™ncia: Layout Estacion√°rio (O produto n√£o se move; m√°quinas e pessoas se movem at√© ele)."
                }
            ]
        };

        // --- Fun√ß√µes de Inicializa√ß√£o e Controle ---

        document.addEventListener('DOMContentLoaded', () => {
            initializeActivity();
            // Exibe o ranking local ao carregar
            displayRanking();
        });

        function initializeActivity() {
            // Garante que o cron√¥metro anterior seja parado, se houver
            clearInterval(timerInterval);
            
            // Reseta vari√°veis de controle
            currentLevel = 1;
            currentScore = 0;
            timeLeft = 600; // Reinicia o tempo para 10 minutos
            
            // Atualiza o display e habilita/desabilita controles
            document.getElementById('current-score').textContent = `Sua Pontua√ß√£o: 0`;
            document.getElementById('finish-btn').disabled = false;
            document.getElementById('next-level-btn').disabled = true;
            document.getElementById('next-level-btn').textContent = 'Avan√ßar N√≠vel';
            document.getElementById('studentName').disabled = false;
            
            const timerBox = document.querySelector('.timer-box');
            timerBox.classList.remove('flash-red');
            
            // Inicia o cron√¥metro e carrega o n√≠vel 1
            startTimer();
            loadLevel(currentLevel);
        }
        
        // NOVO: Fun√ß√£o para reiniciar a atividade
        function resetActivity() {
            if (confirm("Tem certeza que deseja REINICIAR a atividade? Sua pontua√ß√£o atual ser√° perdida.")) {
                initializeActivity();
            }
        }

        function startTimer() {
            const timerDisplay = document.getElementById('timer');
            const timerBox = document.querySelector('.timer-box');
            
            timerInterval = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                
                timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    finishTask(true); // Finaliza por tempo esgotado
                }
                if (timeLeft <= 60 && !timerBox.classList.contains('flash-red')) {
                    timerBox.classList.add('flash-red'); // Adiciona um alerta visual no √∫ltimo minuto
                }
            }, 1000);
        }

        function loadLevel(level) {
            const contentDiv = document.getElementById('activity-content');
            const levelTitle = document.getElementById('level-title');
            const nextBtn = document.getElementById('next-level-btn');
            
            // Atualiza o t√≠tulo e o bot√£o
            levelTitle.textContent = `N√≠vel ${level}: ${getLevelTitle(level)}`;
            nextBtn.disabled = true;

            // Constr√≥i o HTML das quest√µes do n√≠vel
            let htmlContent = '';
            questions[level].forEach((q, index) => {
                const qId = `q${level}-${index}`;
                htmlContent += `
                    <div class="question-item" data-q-index="${index}">
                        <p><strong>Quest√£o ${index + 1}:</strong> ${q.question}</p>
                        <div class="options">
                `;
                // Adiciona as op√ß√µes de m√∫ltipla escolha
                for (const [key, value] of Object.entries(q.options)) {
                    htmlContent += `
                        <label>
                            <input type="radio" name="${qId}" value="${key}" onclick="checkAnswer(${level}, ${index}, '${key}')">
                            ${value}
                        </label>
                    `;
                }
                htmlContent += `
                        </div>
                        <p class="feedback" id="feedback-${qId}"></p>
                    </div>
                `;
            });

            contentDiv.innerHTML = htmlContent;
        }

        function getLevelTitle(level) {
            switch(level) {
                case 1: return "Conceitos Fundamentais";
                case 2: return "Aplica√ß√£o de Princ√≠pios";
                case 3: return "Solu√ß√£o de Problemas e Tipos de Layout";
                default: return "";
            }
        }

        function checkAnswer(level, qIndex, selectedOption) {
            const questionData = questions[level][qIndex];
            const qId = `q${level}-${qIndex}`;
            const feedbackElement = document.getElementById(`feedback-${qId}`);
            const questionElement = document.querySelector(`#activity-content .question-item[data-q-index="${qIndex}"]`);
            
            // Desabilita todas as op√ß√µes ap√≥s a primeira tentativa
            document.querySelectorAll(`input[name="${qId}"]`).forEach(input => {
                input.disabled = true;
                // Marca a op√ß√£o correta visualmente
                if (input.value === questionData.correctAnswer) {
                     input.parentElement.style.backgroundColor = '#d4edda'; 
                }
            });

            // Processa a resposta
            if (selectedOption === questionData.correctAnswer) {
                if (!questionElement.classList.contains('answered-correctly')) { // Evita pontuar novamente
                    currentScore += questionData.points;
                    questionElement.classList.add('answered-correctly');
                    feedbackElement.innerHTML = `‚úÖ Correto! Ganhou ${questionData.points} pontos. ${questionData.reference}`;
                    feedbackElement.style.color = 'green';
                }
                // Destaca a correta que ele clicou
                const correctLabel = document.querySelector(`input[name="${qId}"][value="${selectedOption}"]`).parentElement;
                correctLabel.style.backgroundColor = '#28a745'; 
                correctLabel.style.color = 'white'; 
            } else {
                feedbackElement.innerHTML = `‚ùå Incorreto. A resposta correta est√° destacada em verde. ${questionData.reference}`;
                feedbackElement.style.color = 'red';
                // Destaca a incorreta que ele clicou
                document.querySelector(`input[name="${qId}"][value="${selectedOption}"]`).parentElement.style.backgroundColor = '#f8d7da';
            }
            
            // Atualiza a pontua√ß√£o no display
            document.getElementById('current-score').textContent = `Sua Pontua√ß√£o: ${currentScore}`;
            
            // Verifica se todas as quest√µes do n√≠vel foram respondidas
            checkLevelCompletion(level);
        }

        function checkLevelCompletion(level) {
            const totalQuestions = questions[level].length;
            
            const currentLevelItems = document.querySelectorAll('#activity-content .question-item');
            let correctCount = 0;
            currentLevelItems.forEach(item => {
                if(item.classList.contains('answered-correctly')) {
                    correctCount++;
                }
            });

            if (correctCount === totalQuestions) {
                const nextBtn = document.getElementById('next-level-btn');
                nextBtn.disabled = false;
                
                if (level < MAX_LEVELS) {
                    nextBtn.textContent = `Avan√ßar para o N√≠vel ${level + 1}`;
                } else {
                    nextBtn.textContent = 'N√≠vel Conclu√≠do - Finalizar Tarefa';
                    nextBtn.onclick = () => finishTask();
                }
            }
        }

        function nextLevel() {
            if (currentLevel < MAX_LEVELS) {
                currentLevel++;
                loadLevel(currentLevel);
            }
        }

        function finishTask(timeIsUp = false) {
            clearInterval(timerInterval);
            const studentName = document.getElementById('studentName').value.trim() || 'Aluno An√¥nimo';
            
            let message = '';
            if (timeIsUp) {
                message = `Tempo esgotado! Sua pontua√ß√£o final √© ${currentScore} pontos.`;
            } else {
                message = `Tarefa finalizada! Parab√©ns, ${studentName}! Sua pontua√ß√£o final √© ${currentScore} pontos.`;
            }
            alert(message);

            // Salva a pontua√ß√£o e atualiza o ranking
            saveScore(studentName, currentScore);
            
            // Desabilita controles
            document.getElementById('finish-btn').disabled = true;
            document.getElementById('next-level-btn').disabled = true;
            document.getElementById('studentName').disabled = true;
            document.querySelector('.timer-box').classList.remove('flash-red');
        }

        // --- Fun√ß√µes de Ranking (Utiliza Local Storage) ---

        function getRanking() {
            // O ranking √© armazenado localmente no navegador do aluno
            const ranking = localStorage.getItem('logisticRanking');
            return ranking ? JSON.parse(ranking) : [];
        }

        function saveScore(name, score) {
            let ranking = getRanking();
            
            // Adiciona o novo resultado
            ranking.push({ name: name, score: score, date: new Date().toLocaleDateString('pt-BR') });
            
            // Ordena o ranking (maior pontua√ß√£o primeiro)
            ranking.sort((a, b) => b.score - a.score);
            
            // Limita o ranking aos 10 melhores
            ranking = ranking.slice(0, 10);
            
            // Salva no Local Storage (ranking local)
            localStorage.setItem('logisticRanking', JSON.stringify(ranking));
            
            displayRanking(); // Atualiza a exibi√ß√£o
        }

        function displayRanking() {
            const rankingList = document.getElementById('ranking-list');
            const rankingData = getRanking();
            
            if (rankingData.length === 0) {
                rankingList.innerHTML = '<li>Nenhum resultado ainda. Seja o primeiro a jogar!</li>';
                return;
            }

            rankingList.innerHTML = rankingData.map((item, index) => {
                let medal = '';
                if (index === 0) medal = '<span class="medal-icon">ü•á</span>';
                else if (index === 1) medal = '<span class="medal-icon">ü•à</span>';
                else if (index === 2) medal = '<span class="medal-icon">ü•â</span>';

                return `
                    <li>
                        ${medal} ${item.name}
                        <span>${item.score} pontos - ${item.date}</span>
                    </li>
                `;
            }).join('');
        }
    </script>
    </body>
</html>